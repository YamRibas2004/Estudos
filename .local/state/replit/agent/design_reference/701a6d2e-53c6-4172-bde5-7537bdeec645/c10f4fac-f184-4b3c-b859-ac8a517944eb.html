<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rastreador de Estudos</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'inter': ['Inter', 'system-ui', 'sans-serif']
                    },
                    colors: {
                        'primary': '#2563eb',
                        'success': '#059669', 
                        'danger': '#dc2626',
                        'neutral': {
                            50: '#f8fafc',
                            100: '#f1f5f9',
                            400: '#94a3b8',
                            500: '#64748b',
                            800: '#1e293b'
                        }
                    }
                }
            }
        };
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
</head>
<body class="bg-neutral-50 font-inter">
    <!-- Header -->
    <div class="bg-primary text-white shadow-lg">
        <div class="max-w-7xl mx-auto px-4 py-4">
            <div class="flex items-center space-x-3">
                <div class="w-8 h-8 bg-white rounded-lg flex items-center justify-center">
                    <i class="fas fa-book-open text-primary text-lg"></i>
                </div>
                <div>
                    <h1 class="text-xl font-bold">Rastreador de Estudos</h1>
                    <p class="text-blue-100 text-sm">Monitore seu progresso semanal</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="max-w-7xl mx-auto px-4 py-6">
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            
            <!-- @COMPONENT: LeftColumn [Progress and Goals] -->
            <!-- Column 1: Progress and Goals -->
            <div class="space-y-6">
                <!-- Current Week Progress -->
                <div class="bg-white rounded-xl shadow-sm border border-neutral-100 p-6">
                    <h2 class="text-lg font-semibold text-neutral-800 mb-4">Progresso da Semana Atual</h2>
                    
                    <!-- Time Display -->
                    <div class="text-center mb-4">
                        <div class="text-3xl font-bold text-neutral-800" data-bind="currentWeekTime" id="currentWeekDisplay">0min</div>
                        <div class="text-sm text-neutral-500">/ 12h</div>
                        <div class="text-xs text-neutral-400 mt-1" data-bind="weeklyProgress" id="weeklyProgressText">0% da meta semanal alcançada</div>
                    </div>

                    <!-- Glass Progress Indicator -->
                    <div class="flex justify-center mb-6">
                        <div class="relative">
                            <div class="w-16 h-24 border-2 border-neutral-300 rounded-b-lg bg-neutral-50 overflow-hidden">
                                <div class="absolute bottom-0 w-full bg-danger transition-all duration-500 ease-out" 
                                     id="weeklyGlass" 
                                     style="height: 0%"></div>
                            </div>
                            <div class="text-xs text-center mt-2 text-neutral-500">Copo Semanal</div>
                        </div>
                    </div>

                    <!-- Goals Summary -->
                    <div class="grid grid-cols-2 gap-4">
                        <div class="text-center p-3 bg-neutral-50 rounded-lg">
                            <div class="text-sm text-neutral-500">Meta Semanal</div>
                            <div class="font-semibold text-lg text-neutral-800">12h</div>
                        </div>
                        <div class="text-center p-3 bg-neutral-50 rounded-lg">
                            <div class="text-sm text-neutral-500">Meta Mensal</div>
                            <div class="font-semibold text-lg text-neutral-800">48h</div>
                        </div>
                    </div>
                </div>

                <!-- Controls -->
                <div class="bg-white rounded-xl shadow-sm border border-neutral-100 p-6">
                    <h3 class="text-lg font-semibold text-neutral-800 mb-4">Controles de Semana</h3>
                    
                    <!-- +30 Minutes Button -->
                    <button id="add30MinBtn" 
                            class="w-full bg-primary hover:bg-blue-600 text-white font-medium py-3 px-4 rounded-lg transition-colors duration-200 mb-3"
                            data-event="click:add30Minutes">
                        <i class="fas fa-plus mr-2"></i>+30 Minutos
                    </button>

                    <!-- New Week Button -->
                    <button id="newWeekBtn"
                            class="w-full bg-primary hover:bg-blue-600 text-white font-medium py-3 px-4 rounded-lg transition-colors duration-200 mb-3"
                            data-event="click:createNewWeek">
                        <i class="fas fa-calendar-week mr-2"></i>Nova Semana
                    </button>

                    <!-- Clear Data Button -->
                    <button id="clearDataBtn"
                            class="w-full bg-white hover:bg-neutral-50 border border-neutral-200 text-neutral-600 font-medium py-3 px-4 rounded-lg transition-colors duration-200"
                            data-event="click:clearAllData">
                        <i class="fas fa-trash mr-2"></i>Limpar Dados
                    </button>
                </div>
            </div>
            <!-- @END_COMPONENT: LeftColumn -->

            <!-- @COMPONENT: MiddleColumn [Weekly Schedule] -->
            <!-- Column 2: Weekly Schedule -->
            <div class="space-y-6">
                <div class="bg-white rounded-xl shadow-sm border border-neutral-100 p-6">
                    <h2 class="text-lg font-semibold text-neutral-800 mb-4">Cronograma Semanal</h2>
                    
                    <!-- Week Number -->
                    <div class="bg-primary text-white rounded-lg p-3 mb-4 text-center">
                        <i class="fas fa-calendar mr-2"></i>
                        <span data-bind="currentWeekNumber" id="weekNumberDisplay">Semana 1</span>
                    </div>

                    <!-- Days of Week -->
                    <!-- @MAP: weekDays.map(day => ( -->
                    <div class="space-y-3" id="weeklySchedule">
                        <div class="flex items-center justify-between p-3 bg-neutral-50 rounded-lg border border-neutral-100" data-day="monday">
                            <div class="flex items-center space-x-3">
                                <div class="w-3 h-3 rounded-full bg-danger" id="mondayIndicator"></div>
                                <span class="font-medium text-neutral-700">Seg</span>
                            </div>
                            <div class="flex items-center space-x-2">
                                <span class="text-sm text-neutral-500" data-bind="mondayTime" id="mondayTime">0</span>
                                <div class="flex space-x-1">
                                    <div class="w-4 h-4 rounded bg-neutral-200" id="mondayProgress1"></div>
                                    <div class="w-4 h-4 rounded bg-neutral-200" id="mondayProgress2"></div>
                                    <div class="w-4 h-4 rounded bg-neutral-200" id="mondayProgress3"></div>
                                </div>
                            </div>
                        </div>

                        <div class="flex items-center justify-between p-3 bg-neutral-50 rounded-lg border border-neutral-100" data-day="tuesday">
                            <div class="flex items-center space-x-3">
                                <div class="w-3 h-3 rounded-full bg-danger" id="tuesdayIndicator"></div>
                                <span class="font-medium text-neutral-700">Ter</span>
                            </div>
                            <div class="flex items-center space-x-2">
                                <span class="text-sm text-neutral-500" data-bind="tuesdayTime" id="tuesdayTime">0</span>
                                <div class="flex space-x-1">
                                    <div class="w-4 h-4 rounded bg-neutral-200" id="tuesdayProgress1"></div>
                                    <div class="w-4 h-4 rounded bg-neutral-200" id="tuesdayProgress2"></div>
                                    <div class="w-4 h-4 rounded bg-neutral-200" id="tuesdayProgress3"></div>
                                </div>
                            </div>
                        </div>

                        <div class="flex items-center justify-between p-3 bg-neutral-50 rounded-lg border border-neutral-100" data-day="wednesday">
                            <div class="flex items-center space-x-3">
                                <div class="w-3 h-3 rounded-full bg-danger" id="wednesdayIndicator"></div>
                                <span class="font-medium text-neutral-700">Qua</span>
                            </div>
                            <div class="flex items-center space-x-2">
                                <span class="text-sm text-neutral-500" data-bind="wednesdayTime" id="wednesdayTime">0</span>
                                <div class="flex space-x-1">
                                    <div class="w-4 h-4 rounded bg-neutral-200" id="wednesdayProgress1"></div>
                                    <div class="w-4 h-4 rounded bg-neutral-200" id="wednesdayProgress2"></div>
                                    <div class="w-4 h-4 rounded bg-neutral-200" id="wednesdayProgress3"></div>
                                </div>
                            </div>
                        </div>

                        <div class="flex items-center justify-between p-3 bg-neutral-50 rounded-lg border border-neutral-100" data-day="thursday">
                            <div class="flex items-center space-x-3">
                                <div class="w-3 h-3 rounded-full bg-danger" id="thursdayIndicator"></div>
                                <span class="font-medium text-neutral-700">Qui</span>
                            </div>
                            <div class="flex items-center space-x-2">
                                <span class="text-sm text-neutral-500" data-bind="thursdayTime" id="thursdayTime">0</span>
                                <div class="flex space-x-1">
                                    <div class="w-4 h-4 rounded bg-neutral-200" id="thursdayProgress1"></div>
                                    <div class="w-4 h-4 rounded bg-neutral-200" id="thursdayProgress2"></div>
                                    <div class="w-4 h-4 rounded bg-neutral-200" id="thursdayProgress3"></div>
                                </div>
                            </div>
                        </div>

                        <div class="flex items-center justify-between p-3 bg-neutral-50 rounded-lg border border-neutral-100" data-day="friday">
                            <div class="flex items-center space-x-3">
                                <div class="w-3 h-3 rounded-full bg-danger" id="fridayIndicator"></div>
                                <span class="font-medium text-neutral-700">Sex</span>
                            </div>
                            <div class="flex items-center space-x-2">
                                <span class="text-sm text-neutral-500" data-bind="fridayTime" id="fridayTime">0</span>
                                <div class="flex space-x-1">
                                    <div class="w-4 h-4 rounded bg-neutral-200" id="fridayProgress1"></div>
                                    <div class="w-4 h-4 rounded bg-neutral-200" id="fridayProgress2"></div>
                                    <div class="w-4 h-4 rounded bg-neutral-200" id="fridayProgress3"></div>
                                </div>
                            </div>
                        </div>

                        <div class="flex items-center justify-between p-3 bg-primary/10 rounded-lg border border-primary/20" data-day="saturday">
                            <div class="flex items-center space-x-3">
                                <div class="w-3 h-3 rounded-full bg-primary" id="saturdayIndicator"></div>
                                <span class="font-medium text-primary">Sab</span>
                            </div>
                            <div class="flex items-center space-x-2">
                                <span class="text-sm text-primary/70" data-bind="saturdayTime" id="saturdayTime">0</span>
                                <div class="flex space-x-1">
                                    <div class="w-4 h-4 rounded bg-neutral-200" id="saturdayProgress1"></div>
                                    <div class="w-4 h-4 rounded bg-neutral-200" id="saturdayProgress2"></div>
                                    <div class="w-4 h-4 rounded bg-neutral-200" id="saturdayProgress3"></div>
                                </div>
                            </div>
                        </div>

                        <div class="flex items-center justify-between p-3 bg-primary/10 rounded-lg border border-primary/20" data-day="sunday">
                            <div class="flex items-center space-x-3">
                                <div class="w-3 h-3 rounded-full bg-primary" id="sundayIndicator"></div>
                                <span class="font-medium text-primary">Dom</span>
                            </div>
                            <div class="flex items-center space-x-2">
                                <span class="text-sm text-primary/70" data-bind="sundayTime" id="sundayTime">0</span>
                                <div class="flex space-x-1">
                                    <div class="w-4 h-4 rounded bg-neutral-200" id="sundayProgress1"></div>
                                    <div class="w-4 h-4 rounded bg-neutral-200" id="sundayProgress2"></div>
                                    <div class="w-4 h-4 rounded bg-neutral-200" id="sundayProgress3"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- @END_MAP )) -->
                </div>
            </div>
            <!-- @END_COMPONENT: MiddleColumn -->

            <!-- @COMPONENT: RightColumn [Daily Progress and History] -->
            <!-- Column 3: Daily Progress and History -->
            <div class="space-y-6">
                <!-- Monthly Daily Progress -->
                <div class="bg-white rounded-xl shadow-sm border border-neutral-100 p-6">
                    <h2 class="text-lg font-semibold text-neutral-800 mb-4">Progresso Diário - <span data-bind="currentMonth" id="currentMonthDisplay">Agosto</span></h2>
                    
                    <div class="text-sm text-neutral-500 mb-4">
                        Meta mensal: 5 horas totais • Progresso atual: <span data-bind="monthlyProgress" id="monthlyProgressDisplay">0.0h</span>
                    </div>

                    <!-- Daily Progress Bars -->
                    <div class="grid grid-cols-7 gap-2 mb-4">
                        <div class="text-xs text-neutral-400 text-center">Seg</div>
                        <div class="text-xs text-neutral-400 text-center">Ter</div>
                        <div class="text-xs text-neutral-400 text-center">Qua</div>
                        <div class="text-xs text-neutral-400 text-center">Qui</div>
                        <div class="text-xs text-neutral-400 text-center">Sex</div>
                        <div class="text-xs text-neutral-400 text-center">Sab</div>
                        <div class="text-xs text-neutral-400 text-center">Dom</div>
                    </div>

                    <!-- @FUNCTIONALITY: This should show daily progress bars for the current month -->
                    <div class="grid grid-cols-7 gap-2" id="monthlyProgressBars">
                        <!-- Generate days dynamically -->
                        <!-- @MAP: monthDays.map(day => ( -->
                        <div class="h-20 bg-neutral-100 rounded flex flex-col items-center justify-end p-1" data-day="1">
                            <div class="w-full h-0 bg-success rounded-t transition-all duration-300" id="day1Progress"></div>
                            <div class="text-xs text-neutral-500 mt-1">1</div>
                        </div>
                        <!-- Add more day elements up to 31 -->
                        <!-- @END_MAP )) -->
                    </div>

                    <div class="flex items-center justify-between text-xs text-neutral-400 mt-3">
                        <span><i class="fas fa-circle text-success mr-1"></i>Meta do Mês Atingida (5h+)</span>
                        <span><i class="fas fa-circle text-danger mr-1"></i>Meta do Mês Incompleta (&lt;5h)</span>
                    </div>
                </div>

                <!-- Weekly Summary -->
                <div class="bg-white rounded-xl shadow-sm border border-neutral-100 p-6">
                    <h3 class="text-lg font-semibold text-neutral-800 mb-4">Resumo das Semanas - <span data-bind="currentMonth" id="summaryMonthDisplay">Agosto</span></h3>
                    
                    <!-- @STATE: weekHistory:Array = [] -->
                    <div class="space-y-3" id="weekHistory">
                        <div class="flex items-center justify-between p-3 bg-neutral-50 rounded-lg">
                            <div class="flex items-center space-x-3">
                                <div class="w-8 h-8 bg-primary text-white rounded-full flex items-center justify-center text-sm font-medium">1</div>
                                <div>
                                    <div class="font-medium text-neutral-700">Semana 1</div>
                                    <div class="text-xs text-neutral-400">05/08</div>
                                </div>
                            </div>
                            <div class="text-right">
                                <div class="font-semibold text-neutral-800" data-bind="week1Total">0min</div>
                                <div class="text-xs text-neutral-400">0% da meta</div>
                            </div>
                        </div>
                    </div>

                    <div class="mt-6 p-4 bg-neutral-50 rounded-lg">
                        <div class="flex justify-between items-center">
                            <span class="font-medium text-neutral-700">Total de <span data-bind="currentMonth" id="totalMonthDisplay">Agosto</span>:</span>
                            <div class="text-right">
                                <div class="font-bold text-lg text-neutral-800" data-bind="monthlyTotal" id="monthlyTotalDisplay">0min / 48h</div>
                                <div class="text-xs text-neutral-400">0% da meta mensal</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- @END_COMPONENT: RightColumn -->
        </div>
    </div>

    <!-- @FUNCTIONALITY: JavaScript for study tracking functionality -->
    <script>
        (() => {
            // TODO: Implement business logic, API calls, or state management
            
            // Application State
            let studyTracker = {
                currentWeek: 1,
                weeklyMinutes: 0,
                monthlyMinutes: 0,
                dailyMinutes: {
                    monday: 0,
                    tuesday: 0,
                    wednesday: 0,
                    thursday: 0,
                    friday: 0,
                    saturday: 0,
                    sunday: 0
                },
                weekHistory: [],
                currentDay: 'saturday' // Current active day
            };

            // Load data from localStorage
            function loadData() {
                const saved = localStorage.getItem('studyTracker');
                if (saved) {
                    studyTracker = { ...studyTracker, ...JSON.parse(saved) };
                }
                updateUI();
            }

            // Save data to localStorage
            function saveData() {
                localStorage.setItem('studyTracker', JSON.stringify(studyTracker));
            }

            // Format time function
            function formatTime(minutes) {
                if (minutes === 0) return '0min';
                const hours = Math.floor(minutes / 60);
                const mins = minutes % 60;
                
                if (hours === 0) return `${mins}min`;
                if (mins === 0) return `${hours}h`;
                return `${hours}h${mins}`;
            }

            // Update all UI elements
            function updateUI() {
                // Update current week display
                document.getElementById('currentWeekDisplay').textContent = formatTime(studyTracker.weeklyMinutes);
                document.getElementById('weekNumberDisplay').textContent = `Semana ${studyTracker.currentWeek}`;
                
                // Update weekly progress
                const weeklyProgress = Math.min((studyTracker.weeklyMinutes / 720) * 100, 100);
                document.getElementById('weeklyProgressText').textContent = `${Math.round(weeklyProgress)}% da meta semanal alcançada`;
                
                // Update glass fill
                const glassElement = document.getElementById('weeklyGlass');
                glassElement.style.height = `${weeklyProgress}%`;
                glassElement.className = `absolute bottom-0 w-full transition-all duration-500 ease-out ${
                    studyTracker.weeklyMinutes >= 720 ? 'bg-success' : 'bg-danger'
                }`;

                // Update daily progress for each day
                const days = ['monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday', 'sunday'];
                days.forEach(day => {
                    const timeElement = document.getElementById(`${day}Time`);
                    const indicatorElement = document.getElementById(`${day}Indicator`);
                    
                    if (timeElement) {
                        timeElement.textContent = formatTime(studyTracker.dailyMinutes[day]);
                    }
                    
                    if (indicatorElement) {
                        const dayMinutes = studyTracker.dailyMinutes[day];
                        indicatorElement.className = `w-3 h-3 rounded-full ${
                            dayMinutes >= 360 ? 'bg-success' : 
                            dayMinutes > 0 ? 'bg-yellow-500' : 'bg-danger'
                        }`;
                    }

                    // Update progress dots
                    for (let i = 1; i <= 3; i++) {
                        const progressElement = document.getElementById(`${day}Progress${i}`);
                        if (progressElement) {
                            const threshold = i * 120; // 2h intervals
                            progressElement.className = `w-4 h-4 rounded ${
                                studyTracker.dailyMinutes[day] >= threshold ? 'bg-success' : 'bg-neutral-200'
                            }`;
                        }
                    }
                });

                // Update monthly display
                document.getElementById('monthlyProgressDisplay').textContent = `${(studyTracker.monthlyMinutes / 60).toFixed(1)}h`;
                document.getElementById('monthlyTotalDisplay').textContent = `${formatTime(studyTracker.monthlyMinutes)} / 48h`;

                // Update month displays
                const currentMonth = new Date().toLocaleDateString('pt-BR', { month: 'long' });
                const monthElements = ['currentMonthDisplay', 'summaryMonthDisplay', 'totalMonthDisplay'];
                monthElements.forEach(id => {
                    const element = document.getElementById(id);
                    if (element) element.textContent = currentMonth;
                });
            }

            // Add 30 minutes function
            function add30Minutes() {
                studyTracker.dailyMinutes[studyTracker.currentDay] += 30;
                studyTracker.weeklyMinutes += 30;
                studyTracker.monthlyMinutes += 30;
                
                saveData();
                updateUI();
            }

            // Create new week function
            function createNewWeek() {
                // Save current week to history
                if (studyTracker.weeklyMinutes > 0) {
                    studyTracker.weekHistory.unshift({
                        week: studyTracker.currentWeek,
                        minutes: studyTracker.weeklyMinutes,
                        date: new Date().toLocaleDateString('pt-BR', { day: '2-digit', month: '2-digit' })
                    });

                    // Keep only last 2 weeks in history
                    if (studyTracker.weekHistory.length > 2) {
                        studyTracker.weekHistory = studyTracker.weekHistory.slice(0, 2);
                    }
                }

                // Reset for new week
                studyTracker.currentWeek += 1;
                studyTracker.weeklyMinutes = 0;
                studyTracker.dailyMinutes = {
                    monday: 0,
                    tuesday: 0,
                    wednesday: 0,
                    thursday: 0,
                    friday: 0,
                    saturday: 0,
                    sunday: 0
                };

                saveData();
                updateUI();
                updateWeekHistory();
            }

            // Clear all data function
            function clearAllData() {
                if (confirm('Tem certeza que deseja limpar todos os dados? Esta ação não pode ser desfeita.')) {
                    studyTracker = {
                        currentWeek: 1,
                        weeklyMinutes: 0,
                        monthlyMinutes: 0,
                        dailyMinutes: {
                            monday: 0,
                            tuesday: 0,
                            wednesday: 0,
                            thursday: 0,
                            friday: 0,
                            saturday: 0,
                            sunday: 0
                        },
                        weekHistory: [],
                        currentDay: 'saturday'
                    };
                    
                    localStorage.removeItem('studyTracker');
                    updateUI();
                    updateWeekHistory();
                }
            }

            // Update week history display
            function updateWeekHistory() {
                const historyContainer = document.getElementById('weekHistory');
                historyContainer.innerHTML = '';

                if (studyTracker.weekHistory.length === 0) {
                    historyContainer.innerHTML = `
                        <div class="text-center text-neutral-400 py-4">
                            <i class="fas fa-calendar-alt text-2xl mb-2"></i>
                            <div>Nenhuma semana concluída ainda</div>
                        </div>
                    `;
                    return;
                }

                studyTracker.weekHistory.forEach((week, index) => {
                    const progressPercent = Math.round((week.minutes / 720) * 100);
                    const weekElement = document.createElement('div');
                    weekElement.className = 'flex items-center justify-between p-3 bg-neutral-50 rounded-lg';
                    weekElement.innerHTML = `
                        <div class="flex items-center space-x-3">
                            <div class="w-8 h-8 bg-primary text-white rounded-full flex items-center justify-center text-sm font-medium">${week.week}</div>
                            <div>
                                <div class="font-medium text-neutral-700">Semana ${week.week}</div>
                                <div class="text-xs text-neutral-400">${week.date}</div>
                            </div>
                        </div>
                        <div class="text-right">
                            <div class="font-semibold text-neutral-800">${formatTime(week.minutes)}</div>
                            <div class="text-xs text-neutral-400">${progressPercent}% da meta</div>
                        </div>
                    `;
                    historyContainer.appendChild(weekElement);
                });
            }

            // Event listeners
            document.getElementById('add30MinBtn').addEventListener('click', add30Minutes);
            document.getElementById('newWeekBtn').addEventListener('click', createNewWeek);
            document.getElementById('clearDataBtn').addEventListener('click', clearAllData);

            // Initialize app
            loadData();
            updateWeekHistory();

            // Auto-save every minute
            setInterval(saveData, 60000);
        })();
    </script>
</body>
</html>